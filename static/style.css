/* ===== GLOBAL ===== */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Segoe UI", system-ui, sans-serif;
}

body {
  background: radial-gradient(circle at top, #0f2027, #05090c);
  color: #e6f1ff;
  min-height: 100vh;
  padding: 40px;
}

/* ===== TITLE ===== */
h1 {
  font-size: 2.4rem;
  color: #6dfcff;
  margin-bottom: 30px;
  text-shadow: 0 0 12px rgba(109, 252, 255, 0.6);
}

/* ===== BUTTON PANEL ===== */
#buttons {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 16px;
  margin-bottom: 30px;
}

button {
  background: rgba(20, 30, 40, 0.9);
  border: 1px solid #6dfcff;
  color: #e6f7ff;
  padding: 12px 18px;
  font-size: 0.95rem;

  width: auto;
  min-width: 180px;
  height: auto;
  align-self: flex-start;
}


button {
  background: rgba(20, 30, 40, 0.9);
  border: 1px solid #6dfcff;
  color: #e6f1ff;
  padding: 14px 18px;
  font-size: 0.95rem;
  cursor: pointer;
  border-radius: 8px;
  transition: all 0.25s ease;
  box-shadow: 0 0 0 transparent;
}

button:hover {
  background: #6dfcff;
  color: #05090c;
  box-shadow: 0 0 18px rgba(109, 252, 255, 0.8);
  transform: translateY(-2px);
}

/* ===== OUTPUT TERMINAL ===== */
#output {
  background: rgba(10, 15, 20, 0.95);
  border-left: 4px solid #6dfcff;
  padding: 20px;
  margin-top: 20px;
  font-family: "Consolas", monospace;
  font-size: 0.95rem;
  white-space: pre-wrap;
  border-radius: 6px;
  box-shadow: inset 0 0 20px rgba(109, 252, 255, 0.08);
}

/* ===== FOOTER NOTE ===== */
.footer {
  margin-top: 50px;
  opacity: 0.6;
  font-size: 0.85rem;
}
/* ==== TRAFFIC LIGHT ACTIVE GLOW ==== */
.signal.active {
  opacity: 1;
  box-shadow: 0 0 15px currentColor;
}
/* ==== TRAFFIC LIGHT CONTAINER ==== */
.traffic-light {
  display: flex;
  flex-direction: column;
  gap: 10px;
  background: #111;
  padding: 15px;
  border-radius: 12px;
  width: 60px;
  margin-top: 25px;
}

/* ==== TRAFFIC LIGHT CIRCLES ==== */
.signal {
  width: 25px;
  height: 25px;
  border-radius: 50%;
  opacity: 0.2;
}

/* ==== COLORS ==== */
.signal.red {
  background: red;
}

.signal.yellow {
  background: yellow;
}

.signal.green {
  background: green;
}
/* ==== Smooth Signal Animation ==== */
.signal {
  transition: opacity 0.4s ease,
              box-shadow 0.4s ease,
              transform 0.4s ease;
}

.signal.active {
  transform: scale(1.15);
  animation: pulse 1.5s infinite;
}

@keyframes pulse {
  0% {
    box-shadow: 0 0 10px currentColor;
  }
  50% {
    box-shadow: 0 0 25px currentColor;
  }
  100% {
    box-shadow: 0 0 10px currentColor;
  }
}
/* ==== Emergency Signal Emphasis ==== */
.signal.emergency {
  animation: emergencyPulse 0.8s infinite;
  transform: scale(1.25);
}

@keyframes emergencyPulse {
  0% {
    box-shadow: 0 0 15px currentColor;
  }
  50% {
    box-shadow: 0 0 40px currentColor;
  }
  100% {
    box-shadow: 0 0 15px currentColor;
  }
}
/* ===== Mini Intersection Visualization ===== */
.intersection {
  position: relative;
  width: 220px;
  height: 220px;
  margin: 40px auto;
  background: #0a0f14;
}

.road {
  position: absolute;
  background: #2a2a2a;
}

.road.vertical {
  width: 60px;
  height: 100%;
  left: 50%;
  transform: translateX(-50%);
}

.road.horizontal {
  height: 60px;
  width: 100%;
  top: 50%;
  transform: translateY(-50%);
}

/* Center traffic light */
.intersection-light {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
/* ===== AQI Meter ===== */
.aqi-container {
  width: fit-content;      /* üî• auto-fit to content */
  padding: 0;              /* ‚ùå no extra space */
  margin: 60px 0 0 0;      /* just top spacing */
  background: none;        /* ‚ùå big card background gone */
  border: none;            /* ‚ùå border gone */
  box-shadow: none;        /* ‚ùå glow gone */
}


.aqi-title {
  font-size: 11px;
  margin: 4px 0;                 /* üëà extra spacing gone */
  color: #6dfcff;
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 1px;
  text-align: center;            /* üëà aligns with meter */
  text-shadow: 0 0 6px rgba(109, 252, 255, 0.25);
}


.aqi-meter {
  height: 160px;
  width: 42px;              /* üëà THIS is the real width now */
  margin: 0 auto 10px;
  position: relative;
  background: linear-gradient(
    to bottom,
    rgba(30,40,50,0.8),
    rgba(10,15,20,0.95)
  );
  border: 2px solid rgba(109, 252, 255, 0.5);
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 0 12px rgba(109, 252, 255, 0.25);
}


.aqi-fill {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 0%;                    /* üî• start from 0 */
  transition: height 0.6s ease;  /* smooth but stable */
}


.aqi-value {
  font-size: 14px;
  margin: 4px 0;               /* üëà vertical space controlled */
  color: #6dfcff;
  font-weight: bold;
  text-align: center;          /* üëà centered with meter */
  text-shadow: 0 0 6px rgba(109, 252, 255, 0.35);
}


.aqi-label {
  font-size: 12px;
  margin: 4px 0;               /* üëà no extra gap */
  color: #aaa;
  font-weight: 600;
  letter-spacing: 0.5px;
  text-align: center;          /* üëà aligns vertically */
}

/* ===== ANIMATION SCENE BOX ===== */
.animation-scene-container {
  max-width: 900px;
  margin: 40px auto;
  background: rgba(15, 32, 39, 0.8);
  border: 2px solid #6dfcff;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 0 30px rgba(109, 252, 255, 0.2);
}

.scene-header {
  background: linear-gradient(90deg, rgba(109, 252, 255, 0.2), rgba(109, 252, 255, 0.05));
  padding: 12px;
  text-align: center;
  font-size: 1rem;
  font-weight: bold;
  color: #6dfcff;
  border-bottom: 1px solid rgba(109, 252, 255, 0.3);
}

.animation-scene {
  position: relative;
  width: 100%;
  height: 400px;
  background: linear-gradient(to bottom, #1a3a42, #0f2027);
  overflow: hidden;
}

/* ===== ROAD AREA ===== */
.road-area {
  position: relative;
  width: 100%;
  height: 100%;
  background: linear-gradient(to right, #1a1a1a 0%, #222 50%, #1a1a1a 100%);
  box-shadow: inset 0 2px 8px rgba(0,0,0,0.8);
}

.lane {
  position: absolute;
  width: 100%;
  height: 75px;
}

/* Lane 1 - Top lane */
.lane-1 { 
  top: 25px;
  background: linear-gradient(to bottom, #2a2a2a, #1f1f1f);
  border-bottom: 2px solid #333;
}

/* Lane 2 - Second lane with white center line */
.lane-2 { 
  top: 105px;
  background: linear-gradient(to bottom, #2a2a2a, #1f1f1f);
  border-top: 2px solid #333;
  border-bottom: 2px solid #333;
  position: relative;
}

/* White dashed center line */
.lane-2::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 0;
  width: 100%;
  height: 2px;
  background: repeating-linear-gradient(
    90deg,
    #fff 0px,
    #fff 30px,
    transparent 30px,
    transparent 50px
  );
  transform: translateY(-50%);
  box-shadow: 0 1px 2px rgba(0,0,0,0.5);
}

/* Lane 3 - Third lane */
.lane-3 { 
  top: 185px;
  background: linear-gradient(to bottom, #2a2a2a, #1f1f1f);
  border-top: 2px solid #333;
  border-bottom: 2px solid #333;
  position: relative;
}

/* White dashed center line */
.lane-3::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 0;
  width: 100%;
  height: 2px;
  background: repeating-linear-gradient(
    90deg,
    #fff 0px,
    #fff 30px,
    transparent 30px,
    transparent 50px
  );
  transform: translateY(-50%);
  box-shadow: 0 1px 2px rgba(0,0,0,0.5);
}

/* Lane 4 - Fourth lane */
.lane-4 { 
  top: 265px;
  background: linear-gradient(to bottom, #2a2a2a, #1f1f1f);
  border-top: 2px solid #333;
  border-bottom: 2px solid #333;
  position: relative;
}

/* White dashed center line */
.lane-4::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 0;
  width: 100%;
  height: 2px;
  background: repeating-linear-gradient(
    90deg,
    #fff 0px,
    #fff 30px,
    transparent 30px,
    transparent 50px
  );
  transform: translateY(-50%);
  box-shadow: 0 1px 2px rgba(0,0,0,0.5);
}

/* Lane 5 - Fifth lane */
.lane-5 { 
  top: 345px;
  background: linear-gradient(to bottom, #2a2a2a, #1f1f1f);
  border-top: 2px solid #333;
}

/* ===== TRAFFIC SIGNAL IN SCENE ===== */
.scene-signal {
  position: absolute;
  right: 30px;
  top: 40px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  background: #111;
  padding: 12px;
  border-radius: 10px;
  z-index: 20;
}

.signal-circle {
  width: 30px;
  height: 30px;
  border-radius: 50%;
  opacity: 0.25;
  transition: opacity 0.3s ease, box-shadow 0.3s ease;
}

.red-signal { background: #e74c3c; }
.yellow-signal { background: #f39c12; }
.green-signal { background: #27ae60; }

.signal-circle.active {
  opacity: 1;
  box-shadow: 0 0 15px currentColor;
}

/* ===== VEHICLES ON ROAD ===== */
.vehicle-on-road {
  position: absolute;
  left: -80px;
  opacity: 0;
  z-index: 10;
}

.ambulance-vehicle {
  width: 60px;
  height: 35px;
  background: linear-gradient(90deg, #fff 30%, #e74c3c 30% 65%, #fff 65%);
  border: 2px solid #ccc;
  border-radius: 6px;
  top: 65px;
  box-shadow: 0 6px 12px rgba(0,0,0,0.7), inset -2px 0 4px rgba(0,0,0,0.3);
}

.ambulance-vehicle::before {
  content: '';
  position: absolute;
  width: 12px;
  height: 12px;
  background: radial-gradient(circle at 30% 30%, #00aaff, #0088ff);
  top: -10px;
  left: 50%;
  transform: translateX(-50%);
  border-radius: 50%;
  box-shadow: 0 0 10px #0088ff, 0 0 20px #0066ff;
  animation: siren-pulse 0.4s infinite;
}

@keyframes siren-pulse {
  0%, 100% { box-shadow: 0 0 10px #0088ff, 0 0 20px #0066ff; opacity: 1; }
  50% { box-shadow: 0 0 20px #0088ff, 0 0 35px #0066ff; opacity: 0.8; }
}

.firetruck-vehicle {
  width: 60px;
  height: 35px;
  background: linear-gradient(90deg, #d00 0%, #e74c3c 100%);
  border: 2px solid #a00;
  border-radius: 6px;
  top: 165px;
  box-shadow: 0 6px 12px rgba(0,0,0,0.7), inset -2px 0 4px rgba(0,0,0,0.3);
}

.firetruck-vehicle::before {
  content: '';
  position: absolute;
  width: 12px;
  height: 12px;
  background: radial-gradient(circle at 30% 30%, #ffaa00, #ff6600);
  top: -10px;
  left: 50%;
  transform: translateX(-50%);
  border-radius: 50%;
  box-shadow: 0 0 10px #ffaa00, 0 0 20px #ff6600;
  animation: siren-orange 0.4s infinite;
}

@keyframes siren-orange {
  0%, 100% { box-shadow: 0 0 10px #ffaa00, 0 0 20px #ff6600; opacity: 1; }
  50% { box-shadow: 0 0 20px #ffaa00, 0 0 35px #ff6600; opacity: 0.8; }
}

/* Driving animations */
@keyframes drive-through {
  0% { left: -80px; opacity: 1; }
  50% { left: 50%; opacity: 1; }
  100% { left: 120%; opacity: 0; }
}

.vehicle-on-road.animate {
  animation: drive-through 3s linear forwards;
}

/* ===== ACCIDENT SCENE ===== */
.accident-container {
  position: absolute;
  left: 200px;
  top: 270px;
  opacity: 0;
  z-index: 15;
}

.accident-vehicle {
  width: 50px;
  height: 30px;
  background: linear-gradient(45deg, #333, #111);
  border: 2px solid #555;
  border-radius: 4px;
  position: relative;
}

.accident-vehicle::before {
  content: '';
  position: absolute;
  width: 8px;
  height: 8px;
  background: #ff4444;
  top: -10px;
  left: 50%;
  transform: translateX(-50%);
  border-radius: 50%;
  box-shadow: 0 0 10px #ff4444;
  animation: warning-pulse 0.6s infinite;
}

@keyframes warning-pulse {
  0%, 100% { opacity: 1; transform: translateX(-50%) scale(1); }
  50% { opacity: 0.4; transform: translateX(-50%) scale(0.8); }
}

.accident-barrier {
  width: 40px;
  height: 20px;
  background: repeating-linear-gradient(
    45deg,
    #ff6b00,
    #ff6b00 10px,
    #000 10px,
    #000 20px
  );
  position: absolute;
  left: 60px;
  top: 5px;
  border: 1px solid #ff4400;
}

.accident-warning {
  position: absolute;
  left: 110px;
  top: -5px;
  font-size: 24px;
  animation: warning-shake 0.4s infinite;
}

@keyframes warning-shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-3px); }
  75% { transform: translateX(3px); }
}

.accident-container.show {
  opacity: 1;
}

/* ===== HEAVY TRAFFIC CARS ===== */
.traffic-cars {
  position: absolute;
  width: 100%;
  height: 100%;
}

.traffic-car {
  position: absolute;
  width: 50px;
  height: 30px;
  border: 2px solid #333;
  border-radius: 6px;
  opacity: 0.85;
  background: linear-gradient(180deg, #444 0%, #222 100%);
  box-shadow: inset 0 2px 4px rgba(255,255,255,0.1), 0 4px 8px rgba(0,0,0,0.5), inset -1px 0 2px rgba(0,0,0,0.8);
  animation: traffic-drive 12s linear infinite;
  animation-play-state: running;
}

/* Front bumper */
.traffic-car::after {
  content: '';
  position: absolute;
  width: 3px;
  height: 30px;
  background: linear-gradient(90deg, rgba(50,50,50,0.6), rgba(0,0,0,0.8));
  left: -3px;
  top: 0;
  border-radius: 2px 0 0 2px;
}

/* Traffic car movement animation with variation */
@keyframes traffic-drive {
  0%   { transform: translateX(0); }
  100% { transform: translateX(120px); }
}


/* Back window */
.traffic-car .rear-window {
  position: absolute;
  width: 11px;
  height: 9px;
  background: linear-gradient(135deg, rgba(120,160,255,0.3), rgba(60,110,200,0.2));
  top: 2px;
  right: 5px;
  border-radius: 2px;
  border: 1px solid rgba(120,160,255,0.5);
}

/* Headlights */
.traffic-car .headlight {
  position: absolute;
  width: 5px;
  height: 5px;
  background: #ffff88;
  border-radius: 50%;
  top: 6px;
  box-shadow: 0 0 6px #ffff88, inset 0 1px 2px rgba(255,255,200,0.8);
  z-index: 5;
}

.traffic-car .headlight-left {
  left: 3px;
}

.traffic-car .headlight-right {
  left: 10px;
}

/* Windshield */
.traffic-car .windshield {
  position: absolute;
  width: 15px;
  height: 9px;
  background: linear-gradient(135deg, rgba(120,160,255,0.4), rgba(60,110,200,0.25));
  top: 2px;
  left: 5px;
  border-radius: 3px;
  border: 1px solid rgba(120,160,255,0.6);
  box-shadow: inset 1px 1px 3px rgba(255,255,255,0.3);
}

/* Rear window */
.traffic-car .rear-window {
  position: absolute;
  width: 11px;
  height: 9px;
  background: linear-gradient(135deg, rgba(120,160,255,0.3), rgba(60,110,200,0.2));
  top: 2px;
  right: 5px;
  border-radius: 2px;
  border: 1px solid rgba(120,160,255,0.5);
}

/* Door line */
.traffic-car .door {
  position: absolute;
  width: 1px;
  height: 22px;
  background: rgba(200,200,200,0.4);
  top: 4px;
  left: 25px;
  box-shadow: 1px 0 1px rgba(0,0,0,0.8);
}

/* Rear lights */
.traffic-car .rear-light {
  position: absolute;
  width: 4px;
  height: 4px;
  background: #ff6666;
  border-radius: 50%;
  top: 8px;
  right: 2px;
  box-shadow: 0 0 4px #ff6666;
}

/* Color variations with more realism */
.traffic-car.color-red {
  background: linear-gradient(180deg, #dd4444 0%, #bb2222 100%);
  border-color: #990000;
}

.traffic-car.color-blue {
  background: linear-gradient(180deg, #2a6dac 0%, #1a4a7c 100%);
  border-color: #0d2a4c;
}

.traffic-car.color-white {
  background: linear-gradient(180deg, #f0f0f0 0%, #d4d4d4 100%);
  border-color: #999;
}

.traffic-car.color-black {
  background: linear-gradient(180deg, #2a2a2a 0%, #0f0f0f 100%);
  border-color: #000;
}

/* ===== EMERGENCY ANIMATIONS ===== */
.emergency-flash {
  position: absolute;
  inset: 0; /* fill the intersection area */
  pointer-events: none;
  border-radius: 12px;
  mix-blend-mode: screen;
  opacity: 0;
  transition: opacity 0.2s ease;
}

.emergency-flash.active {
  opacity: 0.8;
  background: radial-gradient(circle at 50% 40%, rgba(0,186,255,0.25), transparent 35%),
              radial-gradient(circle at 50% 60%, rgba(255,50,50,0.25), transparent 35%);
  animation: flash-blue-red 0.6s infinite;
}

@keyframes flash-blue-red {
  0% { filter: hue-rotate(0deg) saturate(1); }
  50% { filter: hue-rotate(200deg) saturate(1.4); }
  100% { filter: hue-rotate(0deg) saturate(1); }
}

.emergency-vehicle {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  pointer-events: none;
}

.vehicle {
  position: absolute;
  width: 46px;
  height: 26px;
  border-radius: 6px;
  transform: translate(-50%, -50%) rotate(0deg);
  left: 50%;
  top: -40px; /* start off-top */
  box-shadow: 0 6px 12px rgba(0,0,0,0.6);
  opacity: 0;
}

.vehicle .siren {
  position: absolute;
  width: 14px;
  height: 6px;
  top: -6px;
  left: 50%;
  transform: translateX(-50%);
  border-radius: 3px;
}

.vehicle.ambulance {
  background: linear-gradient(90deg, #fff 30%, #e11 30% 50%, #fff 50%);
  border: 2px solid rgba(200,200,200,0.12);
}

.vehicle.ambulance:before {
  content: '';
  position: absolute;
  right: 6px;
  top: 6px;
  width: 8px;
  height: 8px;
  background: #e11;
  border-radius: 2px;
}

.vehicle.ambulance .siren {
  background: linear-gradient(90deg, #00f, #0bf);
  box-shadow: 0 0 12px rgba(0,150,255,0.9);
  animation: siren-blue 0.35s infinite;
}

@keyframes siren-blue {
  0% { opacity: 1; transform: translateX(-50%) scaleX(1); }
  50% { opacity: 0.45; transform: translateX(-50%) scaleX(0.9); }
  100% { opacity: 1; transform: translateX(-50%) scaleX(1); }
}

.vehicle.firetruck {
  background: linear-gradient(90deg, #c00 0%, #d33 100%);
  border: 2px solid rgba(200,50,50,0.12);
}

.vehicle.firetruck .siren {
  background: linear-gradient(90deg, #ff0, #f40);
  box-shadow: 0 0 12px rgba(255,120,0,0.9);
  animation: siren-red 0.35s infinite;
}

@keyframes siren-red {
  0% { opacity: 1; transform: translateX(-50%) scaleX(1); }
  50% { opacity: 0.45; transform: translateX(-50%) scaleX(0.9); }
  100% { opacity: 1; transform: translateX(-50%) scaleX(1); }
}

/* Driving animations (downwards through the intersection) */
@keyframes ambulance-drive {
  0% { top: -40px; left: 50%; opacity: 1; transform: translate(-50%, -50%) rotate(0deg); }
  35% { top: 50%; left: 50%; opacity: 1; transform: translate(-50%, -50%) rotate(0deg); }
  100% { top: 280px; left: 50%; opacity: 0; transform: translate(-50%, -50%) rotate(0deg); }
}

@keyframes firetruck-drive {
  0% { top: 260px; left: 50%; opacity: 1; transform: translate(-50%, -50%) rotate(180deg); }
  35% { top: 50%; left: 50%; opacity: 1; transform: translate(-50%, -50%) rotate(180deg); }
  100% { top: -80px; left: 50%; opacity: 0; transform: translate(-50%, -50%) rotate(180deg); }
}

.vehicle.animate-ambulance {
  animation: ambulance-drive 3.2s linear forwards;
}

.vehicle.animate-firetruck {
  animation: firetruck-drive 3.2s linear forwards;
}

/* make sure everything stays visually within the intersection */
.intersection { overflow: visible; }

/* ===== MAIN LAYOUT (ROAD + AQI SIDE BY SIDE) ===== */
.main-layout {
  display: flex;
  gap: 30px;
  align-items: flex-start;
  justify-content: center;
}

/* Road section */
.animation-scene-container {
  flex: 3;
}

/* AQI side panel */
.aqi-container {
  flex: 1;
  margin-top: 60px;
}
/* ===== SIGNAL TIMER ===== */
#signal-timer-display {
  margin-top: 6px;
  font-size: 14px;
  font-weight: bold;
  color: #000;               /* üî• BLACK text */
  background: rgba(255,255,255,0.85);
  padding: 2px 6px;
  border-radius: 6px;
  text-align: center;
  width: 26px;
  align-self: center;
}